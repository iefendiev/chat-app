(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{199:function(e,t,n){},200:function(e,t,n){},389:function(e,t,n){"use strict";n.r(t);var c,s=n(0),a=n.n(s),r=n(176),o=n.n(r),i=(n(199),n(30)),j=(n(200),Object(s.createContext)()),u=n(42),l=n(5),m=n(1),b=function(){var e=Object(s.useContext)(j);return Object(m.jsxs)("form",{className:"input-fields",children:[Object(m.jsx)("h1",{style:{color:"white"},children:"Join Chat Rooms"}),Object(m.jsx)("input",{placeholder:"Name",onChange:function(t){return e.setName(t.target.value)}}),Object(m.jsx)("input",{placeholder:"Room",onChange:function(t){return e.setRoom(t.target.value)}}),Object(m.jsx)(u.b,{onClick:function(t){return e.name&&e.room?null:t.preventDefault},to:"/chat?name=".concat(e.name,"&room=").concat(e.room),children:Object(m.jsx)("button",{className:"join-button",type:"submit",children:"Start Chatting!"})})]})},d=n(194),h=n(178),O=n.n(h),f=n(179),x=n.n(f),p=n(192),g=n(193),v=n(111),N=n.n(v),C=function(e){var t=e.message,n=t.user,c=t.text,s=!1,a=e.name.trim().toLowerCase();return n===a&&(s=!0),s?Object(m.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(m.jsx)("p",{className:"sentText pr-10",children:a}),Object(m.jsx)("div",{className:"messageBox backgroundBlue",children:Object(m.jsx)("p",{className:"messageText colorWhite",children:N.a.emojify(c)})})]}):Object(m.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(m.jsx)("div",{className:"messageBox backgroundLight",children:Object(m.jsx)("p",{className:"messageText colorDark",children:N.a.emojify(c)})}),Object(m.jsx)("p",{className:"sentText pl-10 ",children:n})]})},S=function(e){var t=e.messages,n=e.name;return Object(m.jsx)(g.a,{className:"chat-screen",children:t.map((function(e,t){return Object(m.jsx)("div",{children:Object(m.jsx)(C,{message:e,name:n})},t)}))})},k=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(""),o=Object(i.a)(r,2),j=o[0],b=o[1],h=Object(s.useState)(""),f=Object(i.a)(h,2),g=f[0],v=f[1],N=Object(s.useState)([]),C=Object(i.a)(N,2),k=C[0],y=C[1],w=Object(s.useState)([]),B=Object(i.a)(w,2),T=B[0],E=B[1],R=Object(l.e)().search,D="https://iefendiev-chatapp-backend.herokuapp.com/",F=function(){return!0};Object(s.useEffect)((function(){var e=O.a.parse("".concat(R)),t=e.name,n=e.room;c=x()(D,{transports:["websocket"]}),a(t),b(n),c.emit("join",{name:t,room:n},(function(e){}))}),[D,R]),Object(s.useEffect)((function(){c.on("message",(function(e){y((function(t){return[].concat(Object(d.a)(t),[e])}))}))}),[]),Object(s.useEffect)((function(){c.emit("showUsersInRoom",j,(function(){return null})),c.on("users",(function(e){E((function(){return e}))}))}),[k]);var L=function(e){e.preventDefault(),g&&c.emit("sendMessage",g,(function(){return v("")}))};return Object(m.jsxs)("div",{className:"chat-window",children:[Object(m.jsxs)("form",{className:"chat-field",children:[Object(m.jsxs)("div",{className:"close-wrapper",children:[Object(m.jsxs)("div",{className:"room-name",children:["Room: ",j]}),Object(m.jsx)(u.b,{to:"/",children:Object(m.jsx)(p.a,{className:"close-chat-button",onClick:F})})]}),Object(m.jsx)(S,{messages:k,name:n}),Object(m.jsxs)("div",{className:"chat-bottom",children:[Object(m.jsx)("input",{value:g,onChange:function(e){return v(e.target.value)},placeholder:"Type a message...",onKeyPress:function(e){return"Enter"===e.key?L(e):null},className:"message-input"}),Object(m.jsx)("button",{className:"message-submit-button",type:"submit",onClick:function(e){return function(e){e.preventDefault(),L(e)}(e)},children:"Send"})]})]}),Object(m.jsxs)("div",{className:"online-users",children:[Object(m.jsx)("h3",{style:{fontSize:"1.7rem",borderBottom:"2px solid white",paddingBottom:"0.5rem"},children:"Online Users"}),T?T.map((function(e){return Object(m.jsx)("p",{children:e.name},e.id)})):null]})]})};var y=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),r=Object(i.a)(a,2),o=r[0],d=r[1];return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(u.a,{children:Object(m.jsxs)(j.Provider,{value:{name:n,setName:c,room:o,setRoom:d},children:[Object(m.jsx)(l.a,{path:"/",exact:!0,render:function(){return Object(m.jsx)(b,{})}}),Object(m.jsx)(l.a,{path:"/chat",render:function(){return Object(m.jsx)(k,{})}})]})})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,390)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),w()}},[[389,1,2]]]);
//# sourceMappingURL=main.151d680e.chunk.js.map